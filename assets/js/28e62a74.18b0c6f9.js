"use strict";(globalThis.webpackChunkrc_knob_docs=globalThis.webpackChunkrc_knob_docs||[]).push([[506],{2772(e,n,t){t.d(n,{A:()=>a});const a={primary:"#FC5A96",secondary:"#180094",shadow:"#CCCCCC"}},3045(e,n,t){t.d(n,{An:()=>M,FE:()=>b,JU:()=>R,N6:()=>E,Q6:()=>j,WT:()=>k,gm:()=>C,l5:()=>y});var a=t(7900),r=t(2128);const s=(e,n,t)=>Math.max(e,Math.min(n,t)),o=({mouseAngle:e,angleOffset:n,angleRange:t})=>s(0,1,.5+((e-(n+.5*t)+900)%360-180)/t),l=({mouseAngle:e,multiRotation:n,angleOffset:t,angleRange:a,percentage:r,previousPercentage:s,previousMouseAngle:l})=>{if(null!==l){const r=(e-l)%360,o=r>180?-(360-r):r<-180?360+r:r;if(o>=120||o<=-120)return{updated:!1,mouseAngle:l,percentage:s};const i=s+o/a;if(!n&&(i<0||i>1)){return{updated:!0,mouseAngle:i<0?t:(t+a+720)%360,percentage:i<0?0:1}}return{updated:!0,mouseAngle:e,percentage:i}}if(n){const n=(o({angleOffset:t,angleRange:a,mouseAngle:e})+1-r%1)%1;return{updated:!0,mouseAngle:e,percentage:r+(n>.5?n-1:n)}}return{updated:!0,mouseAngle:e,percentage:o({angleOffset:t,angleRange:a,mouseAngle:e})}},i=(e,n,t)=>{if(!e.updated||!t)return e;const a=c(e.percentage,t),r=(n.angleOffset+n.angleRange*a)%360;return{...e,percentage:a,mouseAngle:r<0?r+360:r}},c=(e,n)=>{if(0===e)return 0;const t=Math.sign(e),a=Math.abs(e),r=1/n;return t*(a-.5*r)+t*(r-(a+.5*r)%r)},d=({min:e,max:n,percentage:t})=>e+(n-e)*t,u=({min:e,max:n,value:t})=>(t-e)/(n-e),g={37:-1,38:1,39:1,40:-1},p=e=>n=>{const t=g[n.keyCode]??0;t&&(n.preventDefault(),e({type:"STEPS",direction:t}))},h=(e,n)=>{const{centerX:t,centerY:a}=(e=>{const n=e.getBoundingClientRect();return{centerX:n.x+e.clientWidth/2,centerY:n.y+e.clientHeight/2}})(e),r=n.clientX-t,s=n.clientY-a,o=180*Math.atan2(s,r)/Math.PI+90,l=o<0?o+360:o;return{mouseX:r,mouseY:s,mouseRadius:Math.sqrt(r*r+s*s),mouseAngle:l}},m=e=>(n,t)=>{switch(t.type){case"START":return((e,n,t)=>{const a=e.mouseAngle,r=e.percentage,s=l({previousMouseAngle:null,previousPercentage:null,...e,mouseAngle:a,percentage:r,...n}),o=n.steps||e.steps,c=i(s,e,o),u=d({...e,...c});return t.onStart(),t.onInteractiveChange(u),e.tracking&&t.onChange(u),{...e,isActive:!0,...c,startPercentage:e.percentage,startValue:e.value,value:u}})(n,t,e);case"MOVE":return((e,n,t)=>{const a=e.mouseAngle,r=e.percentage,s=l({previousMouseAngle:e.mouseAngle,previousPercentage:e.percentage,...e,mouseAngle:a,percentage:r,...n}),o=n.steps||e.steps,c=i(s,e,o),u=d({...e,...c});return t.onInteractiveChange(u),e.tracking&&t.onChange(u),{...e,...c,value:u}})(n,t,e);case"STOP":return((e,n,t)=>(null!==e.value&&(e.tracking||t.onChange(e.value)),t.onEnd(),{...e,isActive:!1,value:e.value,percentage:e.percentage,startPercentage:void 0,startValue:void 0}))(n,0,e);case"CANCEL":return((e,n,t)=>{const a=e.startPercentage,r=e.startValue;return t.onEnd(),e.tracking&&t.onChange(r),{...e,isActive:!1,value:r,percentage:a,startPercentage:void 0,startValue:void 0}})(n,0,e);case"STEPS":return((e,n,t)=>{if(void 0===n.direction)throw Error("Missing direction from Steps action");if(null===e.value)return e;const a=s(e.min,e.max,e.value+1*n.direction);return t.onChange(a),{...e,value:a,percentage:u({...e,value:a})}})(n,t,e);default:return{...n,isActive:!1,value:n.value}}},v=({min:e,max:n,multiRotation:t,initialValue:a,angleOffset:s=0,angleRange:o=360,size:l,steps:i,onChange:c,onInteractiveChange:d,interactiveHook:u,onStart:g,onEnd:v,readOnly:f,tracking:x,useMouseWheel:j})=>{const y=(0,r.useRef)(null),$=(0,r.useRef)(null),C={onChange:c,onInteractiveChange:d,onStart:g,onEnd:v},[{percentage:b,value:k},A]=(0,r.useReducer)(m(C),{isActive:!1,min:e,max:n,multiRotation:t,angleOffset:s,angleRange:o,mouseAngle:null,percentage:a?(a-e)/(n-e):0,value:a||0,svg:y,tracking:x,container:$,size:l,steps:i});return(0,r.useEffect)((({container:e,dispatch:n,readOnly:t,useMouseWheel:a,interactiveHook:r})=>()=>{if(t)return;const s=e.current,o=Object(),l=(e,n)=>{let t={};if(r){const a={ctrlKey:n.ctrlKey,altKey:n.altKey,metaKey:n.metaKey,shiftKey:n.shiftKey,...e};t=r(a)}return t},i=e=>{if("mouse"===e.pointerType&&0!==e.button)return;const t=h(s,e),a=l(t,e);a.readOnly||(e.preventDefault(),e.stopPropagation(),window.PointerEvent?(o.capturedPointerId=e.pointerId,s.setPointerCapture(o.capturedPointerId),s.addEventListener("pointermove",d),s.addEventListener("pointerup",u),s.addEventListener("pointercancel",g)):(window.addEventListener("mousemove",d),window.addEventListener("mouseup",u),o.capturedWindow=!0),s.addEventListener("contextmenu",p),o.capturedContextMenu=!0,n({type:"START",...t,...a}))},c=()=>{void 0!==o.capturedPointerId&&(s.releasePointerCapture(o.capturedPointerId),s.removeEventListener("pointermove",d),s.removeEventListener("pointerup",u),s.removeEventListener("pointercancel",g),o.capturedPointerId=void 0),o.capturedWindow&&(window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",u),o.capturedWindow=!1),o.capturedContextMenu&&(s.removeEventListener("contextmenu",p),o.capturedContextMenu=!1)},d=e=>{e.preventDefault(),e.stopPropagation();const t=h(s,e),a=l(t,e);a.readOnly||n({type:"MOVE",...t,...a})},u=()=>{c(),n({type:"STOP"})},g=()=>{c(),n({type:"CANCEL"})},p=e=>(e.preventDefault(),e.stopPropagation(),c(),n({type:"CANCEL"}),!1),m=a?(e=>n=>{const t=n.deltaX<0||n.deltaY>0?1:n.deltaX>0||n.deltaY<0?-1:0;n.preventDefault(),e({type:"STEPS",direction:t})})(n):null,v=window.PointerEvent?"pointerdown":"mousedown";return s.addEventListener(v,i),m&&s.addEventListener("wheel",m),()=>{c(),s.removeEventListener(v,i),m&&s.removeEventListener("wheel",m)}})({container:$,dispatch:A,readOnly:f,useMouseWheel:j,interactiveHook:u}),[j,f]),{svg:y,container:$,percentage:b,value:k,onKeyDown:p(A)}},f=(e,n,t)=>({x:e+n*Math.cos(t),y:e+n*Math.sin(t)}),x=e=>Math.PI*e/180,j=({color:e,percentage:n,percentageFrom:t=null,percentageTo:r=null,...s})=>{let o,l;if(null!==t&&null!==r?(o=t,l=r):null!==t?(o=t,l=n):null!==r?(o=n,l=r):(o=0,l=n),null===o||null===l)return(0,a.jsx)(a.Fragment,{});const i=(({percentageFrom:e,percentageTo:n,angleOffset:t,angleRange:a,arcWidth:r,radius:s,center:o})=>{const l=(e=>e>=360?359.999:e<=-360?-359.999:e)(a*(n-e)),i=t-90+a*e,c=s-r,d=x(i),u=x(i+l),g=Math.abs(l)<180?0:1,p=l>=0?1:0,h=f(o,s,d),m=f(o,s,u),v=f(o,c,u),j=f(o,c,d);return`M${h.x},${h.y} A${s},${s} 0 ${g} ${p} ${m.x},${m.y}L${v.x},${v.y} A${c},${c} 0 ${g} ${1-p} ${j.x},${j.y} L${h.x},${h.y}`})({...s,percentageFrom:o,percentageTo:l});return(0,a.jsx)("g",{children:(0,a.jsx)("path",{d:i,style:{fill:e}})})},y=({percentage:e,color:n,background:t,...r})=>(0,a.jsxs)("g",{children:[t&&(0,a.jsx)(j,{percentage:e,percentageFrom:e,percentageTo:1,color:t,...r}),(0,a.jsx)(j,{percentage:e,percentageFrom:0,percentageTo:e,color:n,...r})]}),$=({type:e,width:n,height:t,color:r,className:s})=>{switch(e){case"rect":return(0,a.jsx)("rect",{x:.5*-n,width:n,height:t,fill:r,className:s});case"circle":return(0,a.jsx)("circle",{r:n,fill:r,className:s});case"triangle":const e=`M 0,0 L ${n/2},${t} L ${-n/2},${t} z`;return(0,a.jsx)("path",{d:e,fill:r,className:s})}return(0,a.jsx)(a.Fragment,{})},C=({children:e,width:n,height:t=n,angleOffset:s,angleRange:o,percentage:l,useRotation:i=!0,radius:c,center:d,type:u,color:g,className:p})=>{if(null===l)return(0,a.jsx)(a.Fragment,{});let h;if(i)h=`rotate(${s+o*l} ${d} ${d})\n\t\t\t\t\ttranslate( ${d} ${d-c-t})`;else{const e=(s+o*l-90)*Math.PI/180;h=`translate(${d+c*Math.cos(e)} ${d+c*Math.sin(e)})`}return(0,a.jsxs)("g",{transform:h,children:[e&&r.Children.map(e,e=>(0,r.isValidElement)(e)?r.cloneElement(e,{width:n??0,height:t??0,percentage:l}):e),u&&(0,a.jsx)($,{type:u,width:n,height:t,color:g,className:p})]})},b=({angleRange:e,steps:n,type:t="rect",radius:r,tickWidth:s,tickHeight:o,angleOffset:l,center:i,color:c,activeColor:d=c,className:u,activeClassName:g=u,fn:p,percentage:h})=>{const m=e/n,v=n+(360===e?0:1),f=i-s/2,x=i-r;if(null===h)return(0,a.jsx)(a.Fragment,{});const j=Math.round((v-1)*h);const y="circle"===t?(({tickWidth:e,translateX:n,translateY:t,angleOffset:r,stepSize:s,center:o,color:l,active:i,activeColor:c,activeClassName:d,className:u})=>(g,p)=>(0,a.jsx)("circle",{r:e,className:p===i?d:u,fill:p===i?c:l,stroke:"none",transform:`\n        rotate(${r+s*p} ${o} ${o}) \n        translate(${n} ${t})\n        `},p))({tickWidth:s,translateX:f,translateY:x,center:i,angleOffset:l,stepSize:m,color:c,active:j,activeColor:d,className:u,activeClassName:g}):"rect"!==t||p?p?null===h?(0,a.jsx)(a.Fragment,{}):(({fn:e,...n})=>(t,a)=>e({...n,i:a}))({fn:p,tickWidth:s,tickHeight:o,translateX:f,translateY:x,angleOffset:l,stepSize:m,center:i,color:c,active:j,activeColor:d,className:u,activeClassName:g,steps:n,percentage:h}):void 0:(({tickWidth:e,tickHeight:n,translateX:t,translateY:r,angleOffset:s,stepSize:o,center:l,color:i,active:c,activeColor:d,activeClassName:u,className:g})=>(p,h)=>(0,a.jsx)("rect",{className:h===c?u:g,fill:h===c?d:i,stroke:"none",width:e,height:n,transform:`\n        rotate(${s+o*h} ${l} ${l}) \n        translate(${t} ${r})\n        `},h))({tickWidth:s,tickHeight:o,translateX:f,translateY:x,angleOffset:l,stepSize:m,center:i,color:c,active:j,activeColor:d,className:u,activeClassName:g});return(0,a.jsx)("g",{children:Array.from({length:v},y)})},k=({value:e,size:n,decimalPlace:t=0,className:r,marginBottom:s=0})=>{if(null==e)return(0,a.jsx)(a.Fragment,{});let o=e.toFixed(t);return o.startsWith("-")&&0===Number.parseFloat(o)&&(o=o.slice(1)),(0,a.jsx)("text",{style:{userSelect:"none"},x:"50%",textAnchor:"middle",className:r,y:(n??0)-s,children:o})},A=(e,n,t)=>({x:e+n*Math.cos(t),y:e+n*Math.sin(t)}),w=e=>Math.PI*e/180;const M=({color:e,percentage:n,percentageFrom:t=null,radiusFrom:r=null,percentageTo:s=null,radiusTo:o=null,...l})=>{let i,c;if(null!==t&&null!==s?(i=t,c=s):null!==t?(i=t,c=n):null!==s?(i=n,c=s):(i=0,c=n),null===r||null===o)return(0,a.jsx)(a.Fragment,{});if(null===i||null===c)return(0,a.jsx)(a.Fragment,{});const d=(({percentageFrom:e,percentageTo:n,angleOffset:t,angleRange:a,arcWidth:r,outerRadiusFrom:s,outerRadiusTo:o,center:l})=>{const[i,c,d,u]=function(e,n,t,a){return e<=t?[e,n,t,a]:[t,a,e,n]}(e,s,n,o),g=a*(d-i),p=t-90+a*i,h=w(p),m=w(p+g),v=4*Math.ceil(d-i);let f="",x="",j="",y="";for(let $=0;$<=v;$++){const e=$/v,n=c+(u-c)*e,t=n-r,a=h+(m-h)*e,s=180*a/Math.PI*e,o=A(l,n,a),i=A(l,t,a);0===$?x=`${o.x},${o.y} `:f+=`${n},${n} ${s} 0 1 ${o.x},${o.y} `,$===v?y=`${i.x},${i.y} `:j=`${t},${t} ${s} 0 0 ${i.x},${i.y} `+j}return`M ${x}A ${f}L ${y}A ${j}z`})({percentageFrom:i,percentageTo:c,outerRadiusFrom:r,outerRadiusTo:o,...l});return(0,a.jsx)("g",{children:(0,a.jsx)("path",{d:d,style:{fill:e}})})},R=({label:e,angleRange:n,angleOffset:t,percentage:r,center:s,radius:o=0,className:l,style:i={},userSelect:c="none"})=>{if(!e||null===r)return(0,a.jsx)(a.Fragment,{});const d=((e,n,t)=>{const a=t*Math.PI/180;return{x:e+n*Math.cos(a),y:e+n*Math.sin(a)}})(s,o,t+90+n*r);return(0,a.jsx)("g",{transform:`translate( ${s-d.x} ${s-d.y})`,children:(0,a.jsx)("text",{style:{userSelect:c,...i},x:"50%",y:"50%",textAnchor:"middle",className:l,dominantBaseline:"middle",children:e})})},E=({min:e,max:n,value:t,multiRotation:s=!1,angleOffset:o=0,angleRange:l=360,size:i,onChange:c=()=>{},onInteractiveChange:d=()=>{},interactiveHook:u,onStart:g=()=>{},onEnd:p=()=>{},children:h,steps:m,snap:f=!1,tracking:x=!0,readOnly:$=!1,useMouseWheel:A=!0,ariaValueText:w,ariaLabelledBy:E,className:T})=>{const{percentage:N,value:O,svg:P,container:S,onKeyDown:F}=v({min:e,max:n,multiRotation:s,initialValue:t,angleOffset:o,angleRange:l,size:i,steps:f?m:void 0,onChange:c,onInteractiveChange:d,interactiveHook:u,useMouseWheel:A,readOnly:$,tracking:x,onStart:g,onEnd:p});return(0,a.jsx)("div",{ref:S,tabIndex:"0",style:{outline:"none",width:i,height:i},"aria-valuemax":n,"aria-valuemin":e,"aria-valuenow":O,"aria-valuetext":w,"aria-labelledby":E,onKeyDown:$?void 0:F,className:T,children:(0,a.jsx)("svg",{width:i,height:i,ref:P,children:r.Children.map(h,e=>(0,r.isValidElement)(e)&&(({type:e})=>e===y||e===C||e===b||e===k||e===j||e===M||e===R)(e)?r.cloneElement(e,{percentage:N,size:i,value:O,angleOffset:o,angleRange:l,radius:i/2,center:i/2,steps:m,...e.props}):e)})})}},3943(e,n,t){t.d(n,{R:()=>o,x:()=>l});var a=t(2128);const r={},s=a.createContext(r);function o(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(s.Provider,{value:n},e.children)}},6941(e,n,t){t.r(n),t.d(n,{assets:()=>g,contentTitle:()=>u,default:()=>m,frontMatter:()=>d,metadata:()=>a,toc:()=>p});const a=JSON.parse('{"id":"base_components","title":"Base components","description":"The display part of the knob is splitted into the Pointer, Scale, Arc,","source":"@site/docs/1_base_components.mdx","sourceDirName":".","slug":"/base_components","permalink":"/rc-knob/base_components","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Base components"},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/rc-knob/"},"next":{"title":"User interaction","permalink":"/rc-knob/user_interaction"}}');var r=t(7900),s=t(3943),o=t(2772),l=(t(2128),t(3045));const i="value_x419";function c(){return(0,r.jsx)(l.N6,{size:100,angleOffset:220,angleRange:280,min:0,max:100,children:(0,r.jsx)(l.WT,{marginBottom:10,className:i})})}const d={sidebar_position:1,title:"Base components"},u=void 0,g={},p=[{value:"<code>Pointer</code>",id:"pointer",level:2},{value:"<code>Arc</code>",id:"arc",level:2},{value:"<code>Scale</code>",id:"scale",level:2},{value:"<code>Value</code>",id:"value",level:2},{value:"<code>Label</code>",id:"label",level:2},{value:"<code>Range</code>",id:"range",level:2}];function h(e){const n={code:"code",h2:"h2",p:"p",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["The display part of the knob is splitted into the ",(0,r.jsx)(n.code,{children:"Pointer"}),", ",(0,r.jsx)(n.code,{children:"Scale"}),", ",(0,r.jsx)(n.code,{children:"Arc"}),",\n",(0,r.jsx)(n.code,{children:"Value"})," and few others."]}),"\n",(0,r.jsx)(n.h2,{id:"pointer",children:(0,r.jsx)(n.code,{children:"Pointer"})}),"\n",(0,r.jsx)(n.p,{children:"This component displays the location of the knob."}),"\n",(0,r.jsxs)(n.p,{children:["Three shapes are available ",(0,r.jsx)(n.code,{children:"circle"}),", ",(0,r.jsx)(n.code,{children:"rect"}),", ",(0,r.jsx)(n.code,{children:"triangle"}),"."]}),"\n",(0,r.jsx)(l.N6,{size:100,angleOffset:220,angleRange:280,min:0,max:100,children:(0,r.jsx)(l.gm,{width:3,radius:40,type:"circle",color:o.A.primary})}),"\n",(0,r.jsx)(n.h2,{id:"arc",children:(0,r.jsx)(n.code,{children:"Arc"})}),"\n",(0,r.jsxs)(n.p,{children:["This component displays 2 angular zones.\nThe foreground one is from the ",(0,r.jsx)(n.code,{children:"min"})," to the knob location.\nThe background one is from the knob location to ",(0,r.jsx)(n.code,{children:"max"}),"."]}),"\n",(0,r.jsx)(l.N6,{size:100,angleOffset:220,angleRange:280,min:0,max:100,children:(0,r.jsx)(l.l5,{arcWidth:5,color:o.A.primary,background:o.A.secondary})}),"\n",(0,r.jsx)(n.h2,{id:"scale",children:(0,r.jsx)(n.code,{children:"Scale"})}),"\n",(0,r.jsx)(n.p,{children:"This component draw graduation."}),"\n",(0,r.jsx)(l.N6,{size:200,angleOffset:220,angleRange:280,min:0,max:100,steps:10,children:(0,r.jsx)(l.FE,{tickWidth:3,tickHeight:5,radius:45,color:o.A.secondary,activeColor:o.A.primary})}),"\n",(0,r.jsx)(n.h2,{id:"value",children:(0,r.jsx)(n.code,{children:"Value"})}),"\n",(0,r.jsx)(n.p,{children:"This component draw the value of the knob."}),"\n",(0,r.jsx)(c,{}),"\n",(0,r.jsx)(n.h2,{id:"label",children:(0,r.jsx)(n.code,{children:"Label"})}),"\n",(0,r.jsx)(n.p,{children:"This component draw a label at a fixed location\nusing polar coordinates."}),"\n",(0,r.jsxs)(l.N6,{size:100,angleOffset:220,angleRange:280,min:0,max:100,children:[(0,r.jsx)(l.JU,{percentage:0,radius:40,label:"0%",style:{fontSize:"50%"}}),(0,r.jsx)(l.JU,{percentage:.25,radius:40,label:"25%",style:{fontSize:"50%"}}),(0,r.jsx)(l.JU,{percentage:.5,radius:40,label:"50%",style:{fontSize:"50%"}}),(0,r.jsx)(l.JU,{percentage:.75,radius:40,label:"75%",style:{fontSize:"50%"}}),(0,r.jsx)(l.JU,{percentage:1,radius:40,label:"100%",style:{fontSize:"50%"}})]}),"\n",(0,r.jsx)(n.h2,{id:"range",children:(0,r.jsx)(n.code,{children:"Range"})}),"\n",(0,r.jsx)(n.p,{children:"This component draw a range between two values\nusing polar coordinates."}),"\n",(0,r.jsxs)(l.N6,{size:100,angleOffset:220,angleRange:280,min:0,max:100,children:[(0,r.jsx)(l.Q6,{arcWidth:10,color:"#e44b02",percentageFrom:0,percentageTo:.5}),(0,r.jsx)(l.Q6,{arcWidth:10,color:"#ffc90e",percentageFrom:.5,percentageTo:.75}),(0,r.jsx)(l.Q6,{arcWidth:10,color:"#6caa03",percentageFrom:.75,percentageTo:1})]})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);