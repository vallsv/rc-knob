"use strict";(globalThis.webpackChunkrc_knob_docs=globalThis.webpackChunkrc_knob_docs||[]).push([[401],{3045(e,t,n){n.d(t,{An:()=>k,FE:()=>w,JU:()=>O,N6:()=>x,Q6:()=>M,WT:()=>E,aJ:()=>S,gm:()=>A,hB:()=>v,l5:()=>C});var a=n(7900),r=n(2128);function s(e,t,n){return Math.max(e,Math.min(t,n))}function o(e){const{mouseAngle:t,angleOffset:n,angleRange:a}=e;return s(0,1,.5+((t-(n+.5*a)+900)%360-180)/a)}function l(e){const{mouseAngle:t,multiRotation:n,angleOffset:a,angleRange:r,percentage:s,previousPercentage:l,previousMouseAngle:i}=e;if(null!==i){const e=(t-i)%360,s=e>180?-(360-e):e<-180?360+e:e;if(s>=120||s<=-120)return{updated:!1,mouseAngle:i,percentage:l};const o=l+s/r;if(!n&&(o<0||o>1)){return{updated:!0,mouseAngle:o<0?a:(a+r+720)%360,percentage:o<0?0:1}}return{updated:!0,mouseAngle:t,percentage:o}}if(n){const e=(o({angleOffset:a,angleRange:r,mouseAngle:t})+1-s%1)%1;return{updated:!0,mouseAngle:t,percentage:s+(e>.5?e-1:e)}}return{updated:!0,mouseAngle:t,percentage:o({angleOffset:a,angleRange:r,mouseAngle:t})}}function i(e,t,n){if(!e.updated||!n)return e;const a=function(e,t){if(0===e)return 0;const n=Math.sign(e),a=Math.abs(e),r=1/t,s=(a+.5*r)%r;return n*(a-.5*r)+n*(r-s)}(e.percentage,n),r=(t.angleOffset+t.angleRange*a)%360;return{...e,percentage:a,mouseAngle:r<0?r+360:r}}function c(e){const{min:t,max:n,percentage:a}=e;return t+(n-t)*a}function u(e){const{min:t,max:n,value:a}=e;return(a-t)/(n-t)}const g={37:-1,38:1,39:1,40:-1},d=e=>t=>{const n=g[t.keyCode]??0;n&&(t.preventDefault(),e({type:"STEPS",direction:n}))},m=(e,t)=>{const{centerX:n,centerY:a}=(e=>{const t=e.getBoundingClientRect();return{centerX:t.x+e.clientWidth/2,centerY:t.y+e.clientHeight/2}})(e),r=t.clientX-n,s=t.clientY-a,o=180*Math.atan2(s,r)/Math.PI+90,l=o<0?o+360:o;return{mouseX:r,mouseY:s,mouseRadius:Math.sqrt(r*r+s*s),mouseAngle:l}},p=e=>(t,n)=>{switch(n.type){case"START":return((e,t,n)=>{const a=e.mouseAngle,r=e.percentage,s=i(l({previousMouseAngle:null,previousPercentage:null,...e,mouseAngle:a,percentage:r,...t}),e,t.steps||e.steps),o=c({...e,...s});return n.onStart(),n.onInteractiveChange(o),e.tracking&&n.onChange(o),{...e,isActive:!0,...s,startPercentage:e.percentage,startValue:e.value,value:o}})(t,n,e);case"MOVE":return((e,t,n)=>{const a=e.mouseAngle,r=e.percentage,s=i(l({previousMouseAngle:e.mouseAngle,previousPercentage:e.percentage,...e,mouseAngle:a,percentage:r,...t}),e,t.steps||e.steps),o=c({...e,...s});return n.onInteractiveChange(o),e.tracking&&n.onChange(o),{...e,...s,value:o}})(t,n,e);case"STOP":return((e,t,n)=>(null!==e.value&&(e.tracking||n.onChange(e.value)),n.onEnd(),{...e,isActive:!1,value:e.value,percentage:e.percentage,startPercentage:void 0,startValue:void 0}))(t,0,e);case"CANCEL":return((e,t,n)=>{const a=e.startPercentage,r=e.startValue;return n.onEnd(),e.tracking&&n.onChange(r),{...e,isActive:!1,value:r,percentage:a,startPercentage:void 0,startValue:void 0}})(t,0,e);case"STEPS":return((e,t,n)=>{if(void 0===t.direction)throw Error("Missing direction from Steps action");if(null===e.value)return e;const a=s(e.min,e.max,e.value+1*t.direction);return n.onChange(a),{...e,value:a,percentage:u({...e,value:a})}})(t,n,e);default:return{...t,isActive:!1,value:t.value}}},h=({min:e,max:t,multiRotation:n,initialValue:a,angleOffset:s=0,angleRange:o=360,size:l,steps:i,onChange:c,onInteractiveChange:u,interactiveHook:g,onStart:h,onEnd:f,readOnly:v,tracking:x,useMouseWheel:$})=>{const y=(0,r.useRef)(null),M=(0,r.useRef)(null),C={onChange:c,onInteractiveChange:u,onStart:h,onEnd:f},[{percentage:w,value:N},A]=(0,r.useReducer)(p(C),{isActive:!1,min:e,max:t,multiRotation:n,angleOffset:s,angleRange:o,mouseAngle:null,percentage:null!==a?(a-e)/(t-e):null,value:a??null,svg:y,tracking:x,container:M,size:l,steps:i});return(0,r.useEffect)((({container:e,dispatch:t,readOnly:n,useMouseWheel:a,interactiveHook:r})=>()=>{if(n)return;const s=e.current,o=Object(),l=(e,t)=>{let n={};if(r){const a={ctrlKey:t.ctrlKey,altKey:t.altKey,metaKey:t.metaKey,shiftKey:t.shiftKey,...e};n=r(a)}return n},i=e=>{if("mouse"===e.pointerType&&0!==e.button)return;const n=m(s,e),a=l(n,e);a.readOnly||(e.preventDefault(),e.stopPropagation(),window.PointerEvent?(o.capturedPointerId=e.pointerId,s.setPointerCapture(o.capturedPointerId),s.addEventListener("pointermove",u),s.addEventListener("pointerup",g),s.addEventListener("pointercancel",d)):(window.addEventListener("mousemove",u),window.addEventListener("mouseup",g),o.capturedWindow=!0),s.addEventListener("contextmenu",p),o.capturedContextMenu=!0,t({type:"START",...n,...a}))},c=()=>{void 0!==o.capturedPointerId&&(s.releasePointerCapture(o.capturedPointerId),s.removeEventListener("pointermove",u),s.removeEventListener("pointerup",g),s.removeEventListener("pointercancel",d),o.capturedPointerId=void 0),o.capturedWindow&&(window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",g),o.capturedWindow=!1),o.capturedContextMenu&&(s.removeEventListener("contextmenu",p),o.capturedContextMenu=!1)},u=e=>{e.preventDefault(),e.stopPropagation();const n=m(s,e),a=l(n,e);a.readOnly||t({type:"MOVE",...n,...a})},g=()=>{c(),t({type:"STOP"})},d=()=>{c(),t({type:"CANCEL"})},p=e=>(e.preventDefault(),e.stopPropagation(),c(),t({type:"CANCEL"}),!1),h=a?(e=>t=>{const n=t.deltaX<0||t.deltaY>0?1:t.deltaX>0||t.deltaY<0?-1:0;t.preventDefault(),e({type:"STEPS",direction:n})})(t):null,f=window.PointerEvent?"pointerdown":"mousedown";return s.addEventListener(f,i),h&&s.addEventListener("wheel",h),()=>{c(),s.removeEventListener(f,i),h&&s.removeEventListener("wheel",h)}})({container:M,dispatch:A,readOnly:v,useMouseWheel:$,interactiveHook:g}),[$,v]),{svg:y,container:M,percentage:w,value:N,onKeyDown:d(A)}},f=(0,r.createContext)(null);function v(e){const t=(0,r.useContext)(f);if(null===t)throw new Error(`Component <${e}> not part of the <Knob> context`);return t}function x(e){const{min:t,max:n,multiRotation:s=!1,value:o=t??0,angleOffset:l=0,angleRange:i=360,size:c,onChange:u=()=>{},onInteractiveChange:g=()=>{},interactiveHook:d,onStart:m=()=>{},onEnd:p=()=>{},children:v,steps:x,snap:$=!1,tracking:y=!0,readOnly:M=!1,useMouseWheel:C=!0,ariaValueText:w,ariaLabelledBy:N,className:A}=e,{percentage:E,value:R,svg:P,container:k,onKeyDown:O}=h({min:t,max:n,multiRotation:s,initialValue:o,angleOffset:l,angleRange:i,size:c,steps:$?x:void 0,onChange:u,onInteractiveChange:g,interactiveHook:d,useMouseWheel:C,readOnly:M,tracking:y,onStart:m,onEnd:p}),F=(0,r.useMemo)(()=>{const e=c/2;return{size:c,angleOffset:l,angleRange:i,radius:c/2,center:[e,e]}},[c,l,i]),j=(0,r.useMemo)(()=>({value:R,percentage:E,geometry:F,steps:x}),[R,E,F,x]);return(0,a.jsx)("div",{ref:k,tabIndex:0,style:{outline:"none",width:c,height:c},"aria-valuemax":n,"aria-valuemin":t,"aria-valuenow":R??void 0,"aria-valuetext":w,"aria-labelledby":N,onKeyDown:M?void 0:O,className:A,children:(0,a.jsx)(f.Provider,{value:j,children:(0,a.jsx)("svg",{width:c,height:c,ref:P,children:v})})})}function $(e,t,n){return{x:e[0]+t*Math.cos(n),y:e[1]+t*Math.sin(n)}}const y=e=>Math.PI*e/180;function M(e){const t=v("Range"),{percentage:n,geometry:s}=t,{color:o,percentageFrom:l=null,percentageTo:i=null,radius:c=s.radius,outerRadius:u,arcWidth:g,className:d}=e,[m,p]=(0,r.useMemo)(()=>null!==l&&null!==i?[l,i]:null!==l?[l,n]:null!==i?[n,i]:[0,n],[n,l,i]),h=(0,r.useMemo)(()=>null===m||null===p?null:function(e,t,n,a,r){const{angleRange:s,angleOffset:o,center:l}=e,i=(e=>e>=360?359.999:e<=-360?-359.999:e)(s*(r-a)),c=o-90+s*a,u=n-t,g=y(c),d=y(c+i),m=Math.abs(i)<180?0:1,p=i>=0?1:0,h=$(l,n,g),f=$(l,n,d),v=$(l,u,d),x=$(l,u,g);return`M${h.x},${h.y} A${n},${n} 0 ${m} ${p} ${f.x},${f.y}L${v.x},${v.y} A${u},${u} 0 ${m} ${1-p} ${x.x},${x.y} L${h.x},${h.y}`}(s,g,u??c??s.radius,m,p),[m,p,u,c,t]);return null===h?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)("g",{children:(0,a.jsx)("path",{className:d,d:h,style:{fill:o}})})}function C(e){const t=v("Arc"),{geometry:n}=t,{percentage:r}=t,{className:s,backgroundClassName:o,arcWidth:l,color:i,background:c,radius:u=n.radius}=e;return(0,a.jsxs)("g",{children:[(c||o)&&(0,a.jsx)(M,{className:o,percentageFrom:r,percentageTo:1,color:c,arcWidth:l,radius:u}),(0,a.jsx)(M,{className:s,percentageFrom:0,percentageTo:r,color:i,arcWidth:l,radius:u})]})}function w(e){const t=v("Scale"),{percentage:n,geometry:r}=t,{angleRange:s,angleOffset:o,center:l}=r,{steps:i=t.steps,type:c="rect",radius:u=r.radius,tickWidth:g,tickHeight:d,color:m,activeColor:p=m,className:h,activeClassName:f=h,fn:x}=e;if(void 0===i)return(0,a.jsx)(a.Fragment,{});const $=s/i,y=i+(360===s?0:1),M=l[0]-g/2,C=l[1]-u,w=null===n?-1:Math.round((y-1)*n);const N=void 0===i?null:"circle"===c?function({tickWidth:e,translateX:t,translateY:n,angleOffset:r,stepSize:s,center:o,color:l,active:i,activeColor:c,activeClassName:u,className:g}){const d=(d,m)=>(0,a.jsx)("circle",{r:e,className:m===i?u:g,fill:m===i?c:l,stroke:"none",transform:`\n        rotate(${r+s*m} ${o[0]} ${o[1]}) \n        translate(${t} ${n})\n        `},m);return d.displayName="Cmp",d}({tickWidth:g,translateX:M,translateY:C,center:l,angleOffset:o,stepSize:$,color:m,active:w,activeColor:p,className:h,activeClassName:f}):"rect"!==c||x?x?function({fn:e,...t}){return(n,a)=>e({...t,i:a})}({fn:x,tickWidth:g,tickHeight:d,translateX:M,translateY:C,angleOffset:o,stepSize:$,center:l,color:m,active:w,activeColor:p,className:h,activeClassName:f,steps:i,percentage:n}):void 0:function({tickWidth:e,tickHeight:t,translateX:n,translateY:r,angleOffset:s,stepSize:o,center:l,color:i,active:c,activeColor:u,activeClassName:g,className:d}){const m=(m,p)=>(0,a.jsx)("rect",{className:p===c?g:d,fill:p===c?u:i,stroke:"none",width:e,height:t,transform:`\n        rotate(${s+o*p} ${l[0]} ${l[1]}) \n        translate(${n} ${r})\n        `},p);return m.displayName="Cmp",m}({tickWidth:g,tickHeight:d,translateX:M,translateY:C,angleOffset:o,stepSize:$,center:l,color:m,active:w,activeColor:p,className:h,activeClassName:f});return(0,a.jsx)("g",{children:Array.from({length:y},N)})}const N=({type:e,width:t,height:n,color:r,className:s})=>{switch(e){case"rect":return(0,a.jsx)("rect",{x:.5*-t,width:t,height:n,fill:r,className:s});case"circle":return(0,a.jsx)("circle",{r:t,fill:r,className:s});case"triangle":const e=`M 0,0 L ${t/2},${n} L ${-t/2},${n} z`;return(0,a.jsx)("path",{d:e,fill:r,className:s})}return(0,a.jsx)(a.Fragment,{})};function A(e){const t=v("Pointer"),{geometry:n}=t,{angleRange:s,angleOffset:o,center:l}=n,{children:i,width:c,height:u=c,useRotation:g=!0,type:d,percentage:m=t.percentage,radius:p=n.radius,color:h="black",className:f}=e,x=(0,r.useMemo)(()=>{if(null===m)return null;if(g)return`rotate(${o+s*m} ${l[0]} ${l[1]})\n\t\t\t\t\ttranslate( ${l[0]} ${l[1]-p-(u??0)})`;{const e=(o+s*m-90)*Math.PI/180;return`translate(${l[0]+p*Math.cos(e)} ${l[1]+p*Math.sin(e)})`}},[m,o,s,l,p,u]);return null===x?(0,a.jsx)(a.Fragment,{}):(0,a.jsxs)("g",{transform:x,children:[i&&r.Children.map(i,e=>(0,r.isValidElement)(e)?r.cloneElement(e,{width:c??0,height:u??0,percentage:m}):e),d&&(0,a.jsx)(N,{type:d,width:c??1,height:u??1,color:h,className:f})]})}function E(e){const t=v("Value"),{geometry:n}=t,{size:s}=n,{decimalPlace:o=0,className:l,marginBottom:i=0,value:c=t.value}=e,u=(0,r.useMemo)(()=>{if(null==c)return null;let e=c.toFixed(o);return e.startsWith("-")&&0===Number.parseFloat(e)&&(e=e.slice(1)),e},[c,o]);return null===u?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)("text",{style:{userSelect:"none"},x:"50%",textAnchor:"middle",className:l,y:s-i,children:u})}function R(e,t,n){return`${(e[0]+t*Math.cos(n)).toFixed(3)},${(e[1]+t*Math.sin(n)).toFixed(3)}`}function P(e){return Math.PI*e/180}function k(e){const t=v("Spiral"),{percentage:n,geometry:s}=t,{angleOffset:o,angleRange:l,center:i}=s,{color:c,percentageFrom:u=null,radiusFrom:g=null,percentageTo:d=null,radiusTo:m=null,arcWidth:p,className:h}=e,[f,x]=(0,r.useMemo)(()=>null!==u&&null!==d?[u,d]:null!==u?[u,n]:null!==d?[n,d]:[0,n],[n,u,d]),$=(0,r.useMemo)(()=>null===g||null===m||null===f||null===x?null:function(e){const{percentageFrom:t,percentageTo:n,angleOffset:a,angleRange:r,arcWidth:s,outerRadiusFrom:o,outerRadiusTo:l,center:i}=e,[c,u,g,d]=function(e,t,n,a){return e<=n?[e,t,n,a]:[n,a,e,t]}(t,o,n,l),m=r*(g-c),p=a-90+r*c,h=P(p),f=P(p+m),v=Math.ceil(4*(g-c))+3;let x="",$="",y="",M="";for(let C=0;C<=v;C++){const e=C/v,t=u+(d-u)*e,n=t-s,a=h+(f-h)*e,r=180*a/Math.PI*e,o=R(i,t,a),l=R(i,n,a);0===C?$=`${o} `:x+=`${t.toFixed(3)},${t.toFixed(3)} ${r.toFixed(3)} 0 1 ${o} `,C===v?M=`${l} `:y=`${n.toFixed(3)},${n.toFixed(3)} ${r.toFixed(3)} 0 0 ${l} `+y}return`M ${$}A ${x}L ${M}A ${y}z`}({percentageFrom:f,percentageTo:x,outerRadiusFrom:g,outerRadiusTo:m,angleOffset:o,angleRange:l,arcWidth:p,center:i}),[f,x,g,m,o,l,p,i]);return null===$?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)("g",{children:(0,a.jsx)("path",{d:$,style:{fill:c},className:h})})}function O(e){const t=v("Label"),{geometry:n}=t,{angleRange:s,angleOffset:o,center:l}=n,{label:i,percentage:c,radius:u=n.radius,className:g,style:d={},userSelect:m="none"}=e,p=(0,r.useMemo)(()=>{if(!i||null===c)return null;return function(e,t,n){const a=n*Math.PI/180;return{x:e[0]+t*Math.cos(a),y:e[1]+t*Math.sin(a)}}(l,u,o+90+s*c)},[l,u,o,s,c,i]);return null===p?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)("g",{transform:`translate( ${l[0]-p.x} ${l[1]-p.y})`,children:(0,a.jsx)("text",{style:{userSelect:m,...d},x:"50%",y:"50%",textAnchor:"middle",className:g,dominantBaseline:"middle",children:i})})}function F(e,t,n){return{x:e[0]+t*Math.cos(n),y:e[1]+t*Math.sin(n)}}function j(e){return Math.PI*e/180}function L(e,t,n){if(null===n)return null;if(n.percentage<t.percentage)return L(e,n,t);const{angleOffset:a,angleRange:r,center:s}=e,o=a-90+r*t.percentage,l=a-90+r*n.percentage,i=j(o),c=j(l),u=4*Math.ceil(Math.abs(t.percentage-n.percentage));let g="",d="",m="",p="";for(let h=0;h<=u;h++){const e=h/u,a=1-e,r=t.radius*a+n.radius*e,o=.5*(t.width*a+n.width*e),l=r+o,f=r-o,v=i*a+c*e,x=180*v/Math.PI,$=F(s,l,v),y=F(s,f,v);0===h?d=`${$.x},${$.y} `:g+=`${l},${l} ${x} 0 1 ${$.x},${$.y} `,h===u?p=`${y.x},${y.y} `:m=`${f},${f} ${x} 0 0 ${y.x},${y.y} `+m}return`M ${d}A ${g}L ${p}A ${m}z`}function S(e){const t=v("Power"),{percentage:n,geometry:s}=t,{interpolateTo:o,color:l,percentageFrom:i,radiusFrom:c=s.radius,percentageTo:u,radiusTo:g=s.radius,widthFrom:d,widthTo:m,className:p}=e,h=(0,r.useMemo)(()=>({percentage:i,radius:c,width:d}),[i,c,d]),f=(0,r.useMemo)(()=>({percentage:u,radius:g,width:m}),[u,g,m]),x=(0,r.useMemo)(()=>{if(!o||null===n)return null;const e=(n-h.percentage)/(f.percentage-h.percentage),t=Math.min(1,Math.max(e,0));if(!Number.isFinite(t))return null;const a=1-t,r=t;return{percentage:h.percentage*a+f.percentage*r,radius:h.radius*a+f.radius*r,width:h.width*a+f.width*r}},[h,f,o,n]),$=(0,r.useMemo)(()=>L(s,h,o?x:f),[s,h,o?x:f]);return null===$?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)("g",{children:(0,a.jsx)("path",{d:$,style:{fill:l},className:p})})}},7400(e,t,n){n.d(t,{A:()=>s});var a=n(2128),r=n(3045);const s={React:a,...a,Knob:r.N6,Pointer:r.gm,Range:r.Q6,Label:r.JU,Arc:r.l5,Value:r.WT,Scale:r.FE,Spiral:r.An,Power:r.aJ,useKnobContext:r.hB}}}]);